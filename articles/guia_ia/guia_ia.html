<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <title>Guia de Intelig√™ncias Artificiais de Go</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <meta name="author" content="Philippe Fanaro" />
    <meta
      name="description"
      content="Guia de Intelig√™ncias Artificiais de Go"
    />

    <meta property="og:image" content="thumbnail.png" />
    <meta
      property="og:description"
      content="Guia de Intelig√™ncias Artificiais de Go"
    />
    <meta
      property="og:title"
      content="Guia de Intelig√™ncias Artificiais de Go"
    />
    <meta property="og:site_name" content="fanaro.io" />
    <meta property="og:type" content="blog" />

    <script src="../../index.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/atom-one-dark.min.css"
    />
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.5.0/build/highlight.min.js"></script>
    <script defer>
      hljs.initHighlightingOnLoad();
    </script>

    <link rel="stylesheet" href="../../index.css" />
    <link rel="icon" type="image/svg+xml" href="../../assets/favicon.svg" />
  </head>
  <body>
    <article>
      <img src="thumbnail.png" alt="Thumbnail" />

      <h1>Guia de Intelig√™ncias Artificiais de Go</h1>

      <p>
        Neste post, ensinarei como instalar as principais ferramentas de Go da
        atualidade. S√£o itens muito valiosos, j√° que √© como ter um jogador mais
        forte do que profissinais sempre √† disposi√ß√£o: afinal, quem n√£o quer ter
        o AlphaGo revisando os seus jogos? üôÇ
      </p>

      <p>
        Agrade√ßo desde j√° a George do canal de Youtube
        <a href="https://www.youtube.com/channel/UCfmbgDBr2m7k-676AIzJgYQ"
          >Igo Baduk Weiqi</a
        >
        pela ajuda inicial; e a <a href="https://github.com/pnprog">pnprog</a>,
        autor do Go Review Partner, pela corre√ß√µes aos meus erros.
      </p>

      <p>
        O guia √© composto de 4 ferramentas com finalidades sutilmente diversas:
      </p>

      <ol>
        <li>Leela, para analisar partidas e jogar contra a IA;</li>
        <li>
          Lizzie, para analisar partidas in loco (sem registro das varia√ß√µes);
        </li>
        <li>
          Leela + Sabaki (e as Vers√µes ELF e PhoenixGo), para jogar contra a IA
          e faz√™-las jogarem umas contra as outras;
        </li>
        <li>
          Go Review Partner (ou ‚ÄúParceiro de Revis√£o de Go‚Äù), para analisar
          detalhadamente suas partidas.
        </li>
      </ol>

      <section>
        <custom-h2 text="Leela"></custom-h2>

        <figure>
          <img src="Leela.png" alt="" />
          <figcaption>Interface da Leela.</figcaption>
        </figure>

        <p>
          Leela<foot-note
            text="O nome Leela vem de uma personagem do desenho animado 
            Futurama, uma mo√ßa que possui um olho s√≥."
          ></foot-note>
          √© o item mais conhecido da lista, afinal j√° est√° dispon√≠vel h√° algum
          tempo. Foi criada por um cientista belga (que eu nunca conheci T.T),
          Gian-Carlo Pascutto, que, originalmente, trabalhava com xadrez. Depois
          do AlphaGo, Gian-Carlo foi o mais r√°pido criador online a
          disponibilizar uma nova vers√£o de intelig√™ncia artificial de Go que
          utilizava <em>Deep Learning</em>.
        </p>

        <p>
          H√° duas vers√µes do programa, uma que cont√©m o algoritmo b√°sico do
          AlphaGo, <a href="https://sjeng.org/leela.html">Leela</a>, e outra,
          que cont√©m a √∫ltima vers√£o do algoritmo, que come√ßa do zero, sem
          nenhum conhecimento a priori de Go:
          <a href="https://github.com/gcp/leela-zero">Leela Zero</a>. Para quem
          n√£o conhece nada dessa ala do Go, sugiro baixar a Leela original e
          brincar um pouco com ela, a interface √© bastante completa e o n√≠vel √©
          9d KGS, extremamente forte, t√£o bom quanto a maioria dos
          inseis<foot-note
            text="&lt;em&gt;Insei&lt;/em&gt; √© um termo que designa aqueles 
            que treinam, estudam, para se tornar profissionais."
          ></foot-note
          >.
        </p>

        <p>
          A Leela Zero √© um projeto em constru√ß√£o. Apesar de o algoritmo
          descrito pela
          <a href="https://deepmind.com/research/alphago/">Deep Mind</a> em seu
          √∫ltimo artigo &mdash; em que AlphaGo Zero aprendia do in√≠cio, sozinho,
          e se tornava absurdamente mais forte que qualquer vers√£o anterior em
          apenas 8 horas<foot-note
            text="Voc√™ pode, inclusive, apreender um pouco sobre a abertura 
            com a ferramenta AlphaGo Teach (ou ‚ÄúAlphago Ensina‚Äù) se quiser. A 
            √∫nica ressalva √© o fato de que essa ferramenta utiliza a vers√£o 
            AlphaGo Master e n√£o AlphaGo Zero."
          ></foot-note>
          &mdash; ser bastante elegante e simples, calcular os par√¢metros
          demoraria aproximadamente 1700 anos (tenho minhas d√∫vidas sobre esta
          estimativa, apesar de que, com certeza, seria, no m√≠nimo, mais de 100
          anos) com um computador comum. A Google utilizou hardware espec√≠fico
          para o c√¥mputo dos tensores, em que cada placa de GPU especializada em
          Deep Learning custa milh√µes de d√≥lares. Para tentar recalcular os
          pesos da rede neural, Gian-Carlo criou um sistema de compartilhamento
          em que qualquer um pode ajudar com seu computador. Como o projeto
          ainda n√£o foi finalizado, se voc√™ quiser realmente utilizar a Leela
          Zero, ter√° de fazer uso de uma interface gr√°fica, o que discutiremos
          adiante.
        </p>

        <figure>
          <img src="AlphaGo-Teach.png" alt="" />
          <figcaption>Ferramenta <em>AlphaGo Teach</em>.</figcaption>
        </figure>
      </section>

      <section>
        <custom-h2 text="Lizzie"></custom-h2>

        <figure>
          <img src="Lizzie.png" alt="" />
          <figcaption>Interface da Lizzie.</figcaption>
        </figure>

        <p>
          Esta √© uma interface gr√°fica que torna mais agrad√°vel estudar Go com
          IAs. <a href="https://github.com/featurecat/lizzie">Lizzie</a> faz uso
          da Leela Zero para gerar candidatos de pr√≥ximos movimentos, mostrando
          varia√ß√µes ao vivo dos c√°lculos, al√©m de um gr√°fico da probabilidade de
          vit√≥ria. Alguns dos comandos mais √∫teis s√£o:
        </p>

        <ol>
          <li>X mostra o menu de op√ß√µes;</li>
          <li>Espa√ßo liga ou desliga a an√°lise;</li>
          <li>O abre um arquivo SGF para a an√°lise;</li>
          <li>
            A inicia a an√°lise autom√°tica, especificado o n√∫mero de varia√ß√µes
            por movimento.
          </li>
        </ol>

        <p>
          Apesar de muito prazerosa e extremamente poderosa, a Lizzie n√£o
          resolve todos os problemas. H√° muitas imperfei√ß√µes ainda. A maior
          delas √© n√£o haver maneira de salvar no SGF as varia√ß√µes calculadas e
          nem como recuper√°-las dentro do pr√≥prio programa, a falta de registro
          torna o programa um pouco impr√°tico. Mas isso tudo pode ser resolvido
          de uma forma ainda mais automatizada com algo que veremos mais √†
          frente, o Go Review Partner.
        </p>
      </section>

      <section>
        <custom-h2 text="Leela + Sabaki (ELF + PhoenixGo)"></custom-h2>

        <p>
          <em>Sabaki</em
          ><foot-note
            text="Sabaki tamb√©m √© um termo de Go, que designa o assentamento 
            de um grupo fraco dentro da esfera de influ√™ncia advers√°ria 
            atrav√©s de jogadas leves e flex√≠veis."
          ></foot-note>
          √© um dos editores de arquivos de Go mais modernos existentes. O
          programa foi feito por um alem√£o/asi√°tico que focou na personaliza√ß√£o
          e na contribui√ß√£o da comunidade. O c√≥digo fonte √© aberto, qualquer um
          pode criar temas pr√≥prios, h√° novas ferramentas de edi√ß√£o, uma √°rvore
          de varia√ß√µes vertical e, mais importante ainda, integra√ß√£o com
          execut√°veis de Intelig√™ncias Artificiais. Atrav√©s do software, podemos
          jogar contra uma IA ou faz√™-las jogarem entre si.
        </p>

        <p>
          Antes de come√ßarmos a implementa√ß√£o, √© preciso baixar os arquivos
          essenciais. A IA √© composta basicamente de dois arquivos: seu
          execut√°vel, que cont√©m o algoritmo; e um arquivo texto, que possui os
          par√¢metros j√° calculados da rede neural<foot-note
            text="Tente imaginar uma rede neural como um c√©rebro humano. Seu 
            execut√°vel seria basicamente o hardware e as conex√µes, enquanto 
            que o arquivo de texto com os pesos ou par√¢metros da rede seriam 
            an√°logos √† mem√≥ria ou √†s experi√™ncias. Sem o arquivo texto, seria 
            como se come√ß√°ssemos a vida do c√©rebro rede neural do in√≠cio."
          ></foot-note
          >. O execut√°vel que eu recomendo √© o que est√° contido na pr√≥pria
          Lizzie ‚Äì eu tentei com outros e s√≥ obtive erros. J√° para o arquivo com
          os pesos, h√° diversas op√ß√µes.
        </p>

        <p>
          A primeira op√ß√£o √© baixar diretamente
          <a href="http://zero.sjeng.org/best-network"
            >os melhores pesos da Leela Zero</a
          >, tamb√©m encontrada na p√°gina
          <a href="https://github.com/gcp/leela-zero">GitHub da Leela Zero</a>,
          na se√ß√£o <em>I just want to play right now</em>. A outra √© entender o
          que est√° acontecendo. No
          <a href="http://zero.sjeng.org/">site dedicado √† Leela Zero</a>, n√≥s
          podemos encontrar in√∫meras vers√µes dela e cada item nas tabelas possui
          uma for√ßa diferente, que √©, essencialmente, proporcional ao produto
          das dimens√µes encontradas na coluna Size. Segundo
          <a href="https://www.youtube.com/channel/UCfmbgDBr2m7k-676AIzJgYQ"
            >Igo Baduk Weiqi</a
          >, as vers√µes de 128√ó6 j√° teriam for√ßa o suficiente para me (1d KGS)
          dar 3 pedras de compensa√ß√£o. Por√©m, a divers√£o n√£o acaba a√≠. Na tabela
          da direita, em algum momento nos depararemos com n√∫meros em negrito,
          sendo que um deles possui uma porcentagem de aproximadamente 83% (este
          n√∫mero pode mudar no futuro): essa √© a probabilidade de vit√≥ria desses
          pesos contra a melhor vers√£o da Leela Zero.
        </p>

        <p>
          Como isso √© poss√≠vel? Essa √© a itera√ß√£o criada pelo Facebook, com sua
          IA chamada
          <a href="https://research.fb.com/facebook-open-sources-elf-opengo/"
            >ELF</a
          >. Se quiser, voc√™ pode baixar seus pesos diretamente
          <a
            href="http://zero.sjeng.org/networks/62b5417b64c46976795d10a6741801f15f857e5029681a42d02c9852097df4b9.gz"
            >aqui</a
          >. Depois de baixados os arquivos, passemos finalmente √†
          implementa√ß√£o‚Ä¶
        </p>

        <figure>
          <img src="Facebook-ELF.png" alt="" />
          <figcaption>
            <a href="https://research.fb.com/facebook-open-sources-elf-opengo/"
              >Facebook ELF</a
            >
            dentro do site <a href="http://zero.sjeng.org/">zero.sjeng.org</a>.
          </figcaption>
        </figure>

        <p>
          H√° diversos comandos poss√≠veis na implementa√ß√£o da Leela, por√©m s√≥
          mostrarei aquilo que funcionou comigo &mdash; obviamente, fique √†
          vontade para testar outros. Ao abrir o programa, v√° em
          <kbd>Engines</kbd> <kbd>Manage Engines</kbd>..., clique em Add e
          nomeie a IA que voc√™ ir√° implementar. Abaixo, voc√™ pode digitar o
          caminho para o execut√°vel da IA (<code>.exe</code>) ou simplesmente
          clicar no s√≠mbolo da pasta e apont√°-lo diretamente. Em seguida, na
          linha de baixo, ser√° preciso fornecer alguns par√¢metros para a
          simula√ß√£o, al√©m do caminho para o arquivo com os pesos da rede neural
          (para encontr√°-lo, √© s√≥ clicar na barra com o caminho no pr√≥prio
          Windows Explorer; outra dica √© n√£o utilizar nomes de pastas ou
          arquivos que possuam espa√ßos). O que funcionou para mim foi:
        </p>

        <pre>
          <code class="bash">--gtp -w C:\Users\Philippe\Desktop\GoAI\elf_converted_weights.txt -t 2 --noponder --timemanage off</code>
        </pre>

        <p>
          Se voc√™ possuir GPUs adicionais, voc√™ poder√° incluir o comando
          <code>--gpu</code> 0 ou <code>--gpu 1</code> para fazer uso delas,
          seria ent√£o:
        </p>

        <pre>
          <code class="bash">--gtp --gpu 0 --gpu 1 -w C:\Users\Philippe\Desktop\GoAI\elf_converted_weights.txt -t 2 --noponder --timemanage off</code>
        </pre>

        <p>
          Por fim, √© necess√°rio dar os comandos iniciais ao programa. O que eu
          utilizo √© simplemente a configura√ß√£o de tempo para cada movimento. O
          segundo par√¢metro desse comando √© o mais importante, informando a
          quantidade de segundos para cada jogada, assim, se quisermos que a IA
          pense somente 5 segundos, teremos:
        </p>

        <pre>
          <code class="bash">time_settings 0 5 1</code>
        </pre>

        <figure>
          <img src="Creating-Engines.png" alt="" />
          <figcaption>
            Exemplo de Cria√ß√£o de IAs dentro do editor Sabaki.
          </figcaption>
        </figure>

        <p>
          Voil√†! Temos a nossa primeira IA de estima√ß√£o (talvez duas se voc√™
          tamb√©m implementou o Facebook ELF). Para utiliz√°-las, basta ir em
          <kbd>Engines</kbd> <kbd>Attach...</kbd> e clicar na seta ao lado da
          escolha de Preto ou Branco. √â poss√≠vel tanto jogar contra as IAs como
          faz√™-las jogar entre si.
        </p>

        <figure>
          <img src="Attach-Engine.png" alt="" />
          <figcaption>Criando uma partida com IAs.</figcaption>
        </figure>

        <p>
          H√° ainda uma √∫ltima IA que merece muita aten√ß√£o:
          <a href="https://github.com/Tencent/PhoenixGo">PhoenixGo</a>. Como
          surpresa no in√≠cio deste ano, tivemos uma IA diferente vencendo o
          <em>World AI Go Tournament 2018</em> ou ‚ÄúTorneio Mundial de IA de
          2018‚Äù, a PhoenixGo, da Tencent<foot-note
            text="Tencent √© um conglomerado gigante chin√™s, notadamente na 
            √°rea da internet. Ele √© dono dos aplicativos QQ e WeChat, muito 
            populares na China."
          ></foot-note
          >, desbancando a Fine Art (tamb√©m da Tencent) e a Leela Zero. Voc√™
          pode encontrar o arquivo
          <a
            href="https://github.com/yenw/LeelaZero_PhoenixGo/releases/download/v1/leelaz_win_x86_cpu.exe.zip"
            >execut√°vel</a
          >
          e de
          <a
            href="https://github.com/yenw/LeelaZero_PhoenixGo/releases/download/v1/PhoenixGo_v1.txt.gz"
            >texto</a
          >
          necess√°rios para rod√°-la, pelo Sabaki,
          <a href="https://github.com/Tencent/PhoenixGo/issues/35">aqui</a>.
          PhoenixGo √© a IA que tem rodado mais rapidamente e com menos esfor√ßo
          dentre todas que eu j√° testei, mas, na verdade, ela n√£o me parece ser
          a mais forte (talvez a Leela Zero se tornou muito mais forte desde que
          perdeu o torneio mundial?). Aparentemente, dentre as tr√™s, ELF ainda √©
          a IA mais forte.
        </p>

        <figure>
          <img
            src="Varia√ß√£o-Moderna-do-3-3-Leela-Zero-vs-PhoenixGo.png"
            alt=""
          />
          <figcaption>
            Partida entre Leela Zero (Brancas) e PhoenixGo (Pretas). PhoenixGo
            est√° at√© jogando a varia√ß√£o mais atual da invas√£o no 3-3. As jogadas
            analizadas pelas IAs podem ser vistas √† esquerda.
          </figcaption>
        </figure>

        <figure>
          <img src="Derrota-do-PhoenixGo-para-Leela-Zero-Move-117.png" alt="" />
          <figcaption>
            Final da mesma partida entre Leela Zero (Brancas) e PhoenixGo
            (Pretas), Leela Zero+R.
          </figcaption>
        </figure>
      </section>

      <section>
        <custom-h2 text="Go Review Partner (GRP)"></custom-h2>

        <figure>
          <img src="GRP1.png" alt="" />
          <figcaption>Menu do GRP.</figcaption>
        </figure>

        <p>
          O objetivo do
          <a
            href="http://yuntingdian.com/goreviewpartner/grp-documentation/doc.htm#game-review"
            >Go Review Partner</a
          >
          (h√° uma
          <a href="https://github.com/pnprog/goreviewpartner"
            >p√°gina do GRP no GitHub</a
          >
          tamb√©m) √© automatizar o processo de an√°lise de partidas pelas IAs. O
          padr√£o de sa√≠da dos arquivos de an√°lise √©, contudo, o
          <code>.rsgf</code> e n√£o o <code>.sgf</code>, como praxe. O padr√£o
          <code>.rsgf</code> foi criado para arquivos <code>.sgf</code> que
          possuem um n√∫mero muito alto de varia√ß√µes, levando a √°rvores enormes.
          O pr√≥prio GRP √© capaz de abri-los, mas, se voc√™ quiser, h√° duas outras
          alternativas. A primeira seria o programa
          <a href="http://www.ruijiang.com/multigo/">MultiGo</a
          ><foot-note
            text="MultiGo √© um dos sofwares de edi√ß√£o de SGFs mais antigos e 
            completos, apesar de que a apar√™ncia n√£o agrada tanto."
          ></foot-note
          >; e a segunda, converter o arquivo <code>.rsgf</code> em
          <code>.sgf</code> pelo pr√≥prio GRP.
        </p>

        <p>
          Para instalar o software, √© preciso, primeiro, ter o
          <a href="https://www.python.org/downloads/">Python</a> instalado.
          Aten√ß√£o, por√©m, √† vers√£o instalada, pois as mais atuais gerar√£o erro.
          Somente as vers√µes 2.7.X funcionar√£o normalmente (eu uso a 2.7.13). Se
          voc√™ possui Windows, √© s√≥ baixar o arquivo .msi e continuar
          normalmente a instala√ß√£o. Caso voc√™ possua outro sistema operacional,
          ser√° necess√°rio instalar a biblioteca TkInter (j√° embutida no
          Windows), com um comando como:
        </p>

        <pre>
          <code class="bash">sudo apt-get install python python-tk</code>
        </pre>

        <p>
          Em seguida, no Windows, ap√≥s baixarmos um dos
          <a href="http://yuntingdian.com/goreviewpartner/">pacotes</a> com uma
          IA, √© s√≥ clicar no execut√°vel GoReviewPartner.exe para iniciar o
          programa. Aviso, contudo, que fiz v√°rios testes com diversas IAs e
          encontrei problemas com algumas, n√£o havia muita altera√ß√£o na
          probabilidade de vit√≥ria ao longo da revis√£o. Sugeriria come√ßar pelas
          vers√µes da Leela e Leela Zero que s√≥ utilizam CPU. Se voc√™ ainda tiver
          d√∫vidas ou problemas sobre o GRP, o criador dele est√° dispon√≠vel no
          f√≥rum Life in 19√ó19 respondendo coment√°rios em um
          <a
            href="https://lifein19x19.com/viewtopic.php?f=9&t=14050&p=233725#p233725"
            >post</a
          >.
        </p>

        <figure>
          <img src="GRP3.png" alt="" />
          <figcaption>Exemplo de An√°lise pelo GRP.</figcaption>
        </figure>

        <figure>
          <img src="GRP2.png" alt="" />
          <figcaption>
            O GRP tamb√©m analisa outros tamanhos de tabuleiro. (Apesar de que a
            Leela Zero aparentemente os rejeita.)
          </figcaption>
        </figure>
      </section>

      <section>
        <custom-h2 text="Coment√°rios Finais"></custom-h2>

        <p>
          Teoricamente, seria poss√≠vel testar um n√∫mero muito grande de IAs com
          os programas aqui mencionados. Por exemplo, poder√≠amos tentar
          substituir o execut√°vel da Lizzie pelo do PhoenixGo, assim como seus
          pesos, para termos uma interface gr√°fica com o PhoenixGo; ou fazer
          algo an√°logo com o GRP e ter uma vers√£o nova dele. Todavia, depois de
          testar in√∫meras varia√ß√µes, creio que essas adapta√ß√µes n√£o sejam t√£o
          triviais; em geral, √© necess√°rio mais do que uma mera substitui√ß√£o de
          arquivos (Atualiza√ß√£o: aparentemente, a substitui√ß√£o √© poss√≠vel, a
          minha limita√ß√£o que a impede √© o meu fraco <em>hardware</em>).
        </p>

        <p>
          Uma √∫ltima nota √© sobre um aplicativo de celular que j√° roda a Leela
          Zero. Encontrei alguns erros, mas, em geral, ela parece funcionar
          normalmente. O nome do programa √© Go
          <a
            href="https://play.google.com/store/apps/details?id=nl.tengen.gridmaster"
            >Grid Master</a
          >
          e possui vers√µes pagas e gratuitas.
        </p>

        <p>
          Caso, no futuro, eu obtenha algum sucesso com as substitui√ß√µes,
          certamente as colocarei aqui, mas, enquanto isso, as vers√µes j√°
          existentes s√£o mais do que suficientes para a quase totalidade
          utiliza√ß√µes.
        </p>

        <p>
          <em>Atualiza√ß√£o</em>: outro aplicativo que apareceu recentemente √© um
          chin√™s que roda tanto o AQ quanto a Leela Zero, voc√™ pode encontr√°-lo
          aqui.
        </p>
      </section>
    </article>
  </body>
</html>
